<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Estimate isochrones from a given location — isochrone • r5r</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Estimate isochrones from a given location — isochrone"><meta name="description" content="Fast computation of isochrones from a given location. The
function can return either polygon-based or line-based isochrones.
Polygon-based isochrones are generated as concave polygons based on the
travel times from the trip origin to all nodes in the transport network.
Meanwhile, line-based isochronesare based on travel times from each origin
to the centroids of all segments in the transport network."><meta property="og:description" content="Fast computation of isochrones from a given location. The
function can return either polygon-based or line-based isochrones.
Polygon-based isochrones are generated as concave polygons based on the
travel times from the trip origin to all nodes in the transport network.
Meanwhile, line-based isochronesare based on travel times from each origin
to the centroids of all segments in the transport network."><meta property="og:image" content="https://ipeagit.github.io/r5r/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">r5r</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.2.099999</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/r5r.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/accessibility.html">Accessibility</a></li>
    <li><a class="dropdown-item" href="../articles/detailed_itineraries.html">Trip planning with detailed_itineraries()</a></li>
    <li><a class="dropdown-item" href="../articles/faq.html">FAQ - Frequently Asked Questions</a></li>
    <li><a class="dropdown-item" href="../articles/fare_structure.html">Accounting for monetary costs</a></li>
    <li><a class="dropdown-item" href="../articles/isochrones.html">Isochrones</a></li>
    <li><a class="dropdown-item" href="../articles/pareto_frontier.html">Trade-offs between travel time and monetary cost</a></li>
    <li><a class="dropdown-item" href="../articles/time_window.html">Using the time_window parameter</a></li>
    <li><a class="dropdown-item" href="../articles/travel_time_matrix.html">Travel time matrices</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ipeaGIT/r5r/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Estimate isochrones from a given location</h1>
      <small class="dont-index">Source: <a href="https://github.com/ipeaGIT/r5r/blob/master/R/isochrone.R" class="external-link"><code>R/isochrone.R</code></a></small>
      <div class="d-none name"><code>isochrone.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Fast computation of isochrones from a given location. The
function can return either polygon-based or line-based isochrones.
Polygon-based isochrones are generated as concave polygons based on the
travel times from the trip origin to all nodes in the transport network.
Meanwhile, line-based isochronesare based on travel times from each origin
to the centroids of all segments in the transport network.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">isochrone</span><span class="op">(</span></span>
<span>  <span class="va">r5r_core</span>,</span>
<span>  <span class="va">origins</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"transit"</span>,</span>
<span>  mode_egress <span class="op">=</span> <span class="st">"walk"</span>,</span>
<span>  cutoffs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">15</span>, <span class="fl">30</span><span class="op">)</span>,</span>
<span>  sample_size <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>  departure_datetime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  polygon_output <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  time_window <span class="op">=</span> <span class="fl">10L</span>,</span>
<span>  max_walk_time <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  max_bike_time <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  max_car_time <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  max_trip_duration <span class="op">=</span> <span class="fl">120L</span>,</span>
<span>  walk_speed <span class="op">=</span> <span class="fl">3.6</span>,</span>
<span>  bike_speed <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  max_rides <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  max_lts <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  draws_per_minute <span class="op">=</span> <span class="fl">5L</span>,</span>
<span>  n_threads <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-r-r-core">r5r_core<a class="anchor" aria-label="anchor" href="#arg-r-r-core"></a></dt>
<dd><p>An object to connect with the R5 routing engine, created with
<code><a href="setup_r5.html">setup_r5()</a></code>.</p></dd>


<dt id="arg-origins">origins<a class="anchor" aria-label="anchor" href="#arg-origins"></a></dt>
<dd><p>Either a <code>POINT sf</code> object with WGS84 CRS, or a
<code>data.frame</code> containing the columns <code>id</code>, <code>lon</code> and <code>lat</code>.</p></dd>


<dt id="arg-mode">mode<a class="anchor" aria-label="anchor" href="#arg-mode"></a></dt>
<dd><p>A character vector. The transport modes allowed for access,
transfer and vehicle legs of the trips. Defaults to <code>WALK</code>. Please see
details for other options.</p></dd>


<dt id="arg-mode-egress">mode_egress<a class="anchor" aria-label="anchor" href="#arg-mode-egress"></a></dt>
<dd><p>A character vector. The transport mode used after egress
from the last public transport. It can be either <code>WALK</code>, <code>BICYCLE</code> or
<code>CAR</code>. Defaults to <code>WALK</code>. Ignored when public transport is not used.</p></dd>


<dt id="arg-cutoffs">cutoffs<a class="anchor" aria-label="anchor" href="#arg-cutoffs"></a></dt>
<dd><p>numeric vector. Number of minutes to define the time span of
each Isochrone. Defaults to <code>c(0, 15, 30)</code>.</p></dd>


<dt id="arg-sample-size">sample_size<a class="anchor" aria-label="anchor" href="#arg-sample-size"></a></dt>
<dd><p>numeric. Sample size of nodes in the transport network used
to estimate isochrones. Defaults to <code>0.8</code> (80% of all nodes in the
transport network). Value can range between <code>0.2</code> and <code>1</code>. Smaller
values increase computation speed but return results with lower
precision. This parameter has no effect when <code>polygon_output = FALSE</code>.</p></dd>


<dt id="arg-departure-datetime">departure_datetime<a class="anchor" aria-label="anchor" href="#arg-departure-datetime"></a></dt>
<dd><p>A POSIXct object. Please note that the departure
time only influences public transport legs. When working with public
transport networks, please check the <code>calendar.txt</code> within your GTFS
feeds for valid dates. Please see details for further information on
how datetimes are parsed.</p></dd>


<dt id="arg-polygon-output">polygon_output<a class="anchor" aria-label="anchor" href="#arg-polygon-output"></a></dt>
<dd><p>A Logical. If <code>TRUE</code>, the function outputs
polygon-based isochrones (the default) based on travel times from each
origin to a sample of a random  sample nodes in the transport network
(see parameter <code>sample_size</code>). If <code>FALSE</code>, the function outputs
line-based isochrones based on travel times from each origin to the
centroids of all segments in the transport network.</p></dd>


<dt id="arg-time-window">time_window<a class="anchor" aria-label="anchor" href="#arg-time-window"></a></dt>
<dd><p>An integer. The time window in minutes for which <code>r5r</code>
will calculate multiple travel time matrices departing each minute.
Defaults to 10 minutes. The function returns the result based on
median travel times. Please read the time window vignette for more
details on its usage <code><a href="../articles/time_window.html">vignette("time_window", package = "r5r")</a></code></p></dd>


<dt id="arg-max-walk-time">max_walk_time<a class="anchor" aria-label="anchor" href="#arg-max-walk-time"></a></dt>
<dd><p>An integer. The maximum walking time (in minutes) to
access and egress the transit network, or to make transfers within the
network. Defaults to no restrictions, as long as <code>max_trip_duration</code>
is respected. The max time is considered separately for each leg (e.g.
if you set <code>max_walk_time</code> to 15, you could potentially walk up to 15
minutes to reach transit, and up to <em>another</em> 15 minutes to reach the
destination after leaving transit). Defaults to <code>Inf</code>, no limit.</p></dd>


<dt id="arg-max-bike-time">max_bike_time<a class="anchor" aria-label="anchor" href="#arg-max-bike-time"></a></dt>
<dd><p>An integer. The maximum cycling time (in minutes) to
access and egress the transit network. Defaults to no restrictions, as
long as <code>max_trip_duration</code> is respected. The max time is considered
separately for each leg (e.g. if you set <code>max_bike_time</code> to 15 minutes,
you could potentially cycle up to 15 minutes to reach transit, and up
to <em>another</em> 15 minutes to reach the destination after leaving
transit). Defaults to <code>Inf</code>, no limit.</p></dd>


<dt id="arg-max-car-time">max_car_time<a class="anchor" aria-label="anchor" href="#arg-max-car-time"></a></dt>
<dd><p>An integer. The maximum driving time (in minutes) to
access and egress the transit network. Defaults to no restrictions, as
long as <code>max_trip_duration</code> is respected. The max time is considered
separately for each leg (e.g. if you set <code>max_car_time</code> to 15 minutes,
you could potentially drive up to 15 minutes to reach transit, and up
to <em>another</em> 15 minutes to reach the destination after leaving transit).
Defaults to <code>Inf</code>, no limit.</p></dd>


<dt id="arg-max-trip-duration">max_trip_duration<a class="anchor" aria-label="anchor" href="#arg-max-trip-duration"></a></dt>
<dd><p>An integer. The maximum trip duration in minutes.
Defaults to 120 minutes (2 hours).</p></dd>


<dt id="arg-walk-speed">walk_speed<a class="anchor" aria-label="anchor" href="#arg-walk-speed"></a></dt>
<dd><p>A numeric. Average walk speed in km/h. Defaults to 3.6 km/h.</p></dd>


<dt id="arg-bike-speed">bike_speed<a class="anchor" aria-label="anchor" href="#arg-bike-speed"></a></dt>
<dd><p>A numeric. Average cycling speed in km/h. Defaults to 12 km/h.</p></dd>


<dt id="arg-max-rides">max_rides<a class="anchor" aria-label="anchor" href="#arg-max-rides"></a></dt>
<dd><p>An integer. The maximum number of public transport rides
allowed in the same trip. Defaults to 3.</p></dd>


<dt id="arg-max-lts">max_lts<a class="anchor" aria-label="anchor" href="#arg-max-lts"></a></dt>
<dd><p>An integer between 1 and 4. The maximum level of traffic
stress that cyclists will tolerate. A value of 1 means cyclists will
only travel through the quietest streets, while a value of 4 indicates
cyclists can travel through any road. Defaults to 2. Please see
details for more information.</p></dd>


<dt id="arg-draws-per-minute">draws_per_minute<a class="anchor" aria-label="anchor" href="#arg-draws-per-minute"></a></dt>
<dd><p>An integer. The number of Monte Carlo draws to
perform per time window minute when calculating travel time matrices and
when estimating accessibility. Defaults to 5. This would mean 300 draws in
a 60-minute time window, for example. This parameter only affects the
results when the GTFS feeds contain a <code>frequencies.txt</code> table. If the GTFS
feed does not have a frequency table, r5r still allows for multiple runs
over the set <code>time_window</code> but in a deterministic way.</p></dd>


<dt id="arg-n-threads">n_threads<a class="anchor" aria-label="anchor" href="#arg-n-threads"></a></dt>
<dd><p>An integer. The number of threads to use when running the
router in parallel. Defaults to use all available threads (<code>Inf</code>).</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>A logical. Whether to show <code>R5</code> informative messages when
running the function. Defaults to <code>FALSE</code> (please note that in such case
<code>R5</code> error messages are still shown). Setting <code>verbose</code> to <code>TRUE</code> shows
detailed output, which can be useful for debugging issues not caught by
<code>r5r</code>.</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>A logical. Whether to show a progress counter when running
the router. Defaults to <code>FALSE</code>. Only works when <code>verbose</code> is set to
<code>FALSE</code>, so the progress counter does not interfere with <code>R5</code>'s output
messages. Setting <code>progress</code> to <code>TRUE</code> may impose a small penalty for
computation efficiency, because the progress counter must be
synchronized among all active threads.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>POLYGON  "sf" "data.frame"</code> for each isochrone of each origin.</p>
    </div>
    <div class="section level2">
    <h2 id="transport-modes">Transport modes<a class="anchor" aria-label="anchor" href="#transport-modes"></a></h2>



<p><code>R5</code> allows for multiple combinations of transport modes. The options
include:</p><ul><li><p><strong>Transit modes:</strong> <code>TRAM</code>, <code>SUBWAY</code>, <code>RAIL</code>, <code>BUS</code>, <code>FERRY</code>, <code>CABLE_CAR</code>,
<code>GONDOLA</code>, <code>FUNICULAR</code>. The option <code>TRANSIT</code> automatically considers all
public transport modes available.</p></li>
<li><p><strong>Non transit modes:</strong> <code>WALK</code>, <code>BICYCLE</code>, <code>CAR</code>, <code>BICYCLE_RENT</code>,
<code>CAR_PARK</code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="level-of-traffic-stress-lts-">Level of Traffic Stress (LTS)<a class="anchor" aria-label="anchor" href="#level-of-traffic-stress-lts-"></a></h2>



<p>When cycling is enabled in <code>R5</code> (by passing the value <code>BIKE</code> to either
<code>mode</code> or <code>mode_egress</code>), setting <code>max_lts</code> will allow cycling only on
streets with a given level of danger/stress. Setting <code>max_lts</code> to 1, for
example, will allow cycling only on separated bicycle infrastructure or
low-traffic streets and routing will revert to walking when traversing any
links with LTS exceeding 1. Setting <code>max_lts</code> to 3 will allow cycling on
links with LTS 1, 2 or 3. Routing also reverts to walking if the street
segment is tagged as non-bikable in OSM (e.g. a staircase), independently of
the specified max LTS.</p>
<p>The default methodology for assigning LTS values to network edges is based
on commonly tagged attributes of OSM ways. See more info about LTS in the
original documentation of R5 from Conveyal at
<a href="https://docs.conveyal.com/learn-more/traffic-stress" class="external-link">https://docs.conveyal.com/learn-more/traffic-stress</a>. In summary:</p><ul><li><p><strong>LTS 1</strong>: Tolerable for children. This includes low-speed, low-volume
streets, as well as those with separated bicycle facilities (such as
parking-protected lanes or cycle tracks).</p></li>
<li><p><strong>LTS 2</strong>: Tolerable for the mainstream adult population. This includes
streets where cyclists have dedicated lanes and only have to interact with
traffic at formal crossing.</p></li>
<li><p><strong>LTS 3</strong>: Tolerable for "enthused and confident" cyclists. This includes
streets which may involve close proximity to moderate- or high-speed
vehicular traffic.</p></li>
<li><p><strong>LTS 4</strong>: Tolerable only for "strong and fearless" cyclists. This
includes streets where cyclists are required to mix with moderate- to
high-speed vehicular traffic.</p></li>
</ul><p>For advanced users, you can provide custom LTS values by adding a tag <code>&lt;key = "lts"&gt;</code> to the <code>osm.pbf</code> file.</p>
    </div>
    <div class="section level2">
    <h2 id="datetime-parsing">Datetime parsing<a class="anchor" aria-label="anchor" href="#datetime-parsing"></a></h2>



<p><code>r5r</code> ignores the timezone attribute of datetime objects when parsing dates
and times, using the study area's timezone instead. For example, let's say
you are running some calculations using Rio de Janeiro, Brazil, as your study
area. The datetime <code>as.POSIXct("13-05-2019 14:00:00", format = "%d-%m-%Y %H:%M:%S")</code> will be parsed as May 13th, 2019, 14:00h in
Rio's local time, as expected. But <code>as.POSIXct("13-05-2019 14:00:00", format = "%d-%m-%Y %H:%M:%S", tz = "Europe/Paris")</code> will also be parsed as
the exact same date and time in Rio's local time, perhaps surprisingly,
ignoring the timezone attribute.</p>
    </div>
    <div class="section level2">
    <h2 id="routing-algorithm">Routing algorithm<a class="anchor" aria-label="anchor" href="#routing-algorithm"></a></h2>



<p>The <code><a href="travel_time_matrix.html">travel_time_matrix()</a></code>, <code><a href="expanded_travel_time_matrix.html">expanded_travel_time_matrix()</a></code>,
<code><a href="arrival_travel_time_matrix.html">arrival_travel_time_matrix()</a></code>  and <code><a href="accessibility.html">accessibility()</a></code> functions use an
<code>R5</code>-specific extension to the RAPTOR routing algorithm (see Conway et al.,
2017). This RAPTOR extension uses a systematic sample of one departure per
minute over the time window set by the user in the 'time_window' parameter.
A detailed description of base RAPTOR can be found in Delling et al (2015).
However, whenever the user includes transit fares inputs to these functions,
they automatically switch to use an <code>R5</code>-specific extension to the McRAPTOR
routing algorithm.</p><ul><li><p>Conway, M. W., Byrd, A., &amp; van der Linden, M. (2017). Evidence-based
transit and land use sketch planning using interactive accessibility methods
on combined schedule and headway-based networks. Transportation Research
Record, 2653(1), 45-53. <a href="https://doi.org/10.3141/2653-06" class="external-link">doi:10.3141/2653-06</a></p></li>
<li><p>Delling, D., Pajor, T., &amp; Werneck, R. F. (2015). Round-based public
transit routing. Transportation Science, 49(3), 591-604.
<a href="https://doi.org/10.1287/trsc.2014.0534" class="external-link">doi:10.1287/trsc.2014.0534</a></p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>java.parameters <span class="op">=</span> <span class="st">"-Xmx2G"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ipeaGIT/r5r" class="external-link">r5r</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># build transport network</span></span></span>
<span class="r-in"><span><span class="va">data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/poa"</span>, package <span class="op">=</span> <span class="st">"r5r"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">r5r_core</span> <span class="op">&lt;-</span> <span class="fu"><a href="setup_r5.html">setup_r5</a></span><span class="op">(</span>data_path <span class="op">=</span> <span class="va">data_path</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using cached network.dat from /home/runner/work/_temp/Library/r5r/extdata/poa/network.dat</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># load origin/point of interest</span></span></span>
<span class="r-in"><span><span class="va">points</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_path</span>, <span class="st">"poa_points_of_interest.csv"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">origin</span> <span class="op">&lt;-</span> <span class="va">points</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">departure_datetime</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span></span></span>
<span class="r-in"><span> <span class="st">"13-05-2019 14:00:00"</span>,</span></span>
<span class="r-in"><span> format <span class="op">=</span> <span class="st">"%d-%m-%Y %H:%M:%S"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># estimate polygon-based isochrone from origin</span></span></span>
<span class="r-in"><span><span class="va">iso_poly</span> <span class="op">&lt;-</span> <span class="fu">isochrone</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">r5r_core</span>,</span></span>
<span class="r-in"><span>  origins <span class="op">=</span> <span class="va">origin</span>,</span></span>
<span class="r-in"><span>  mode <span class="op">=</span> <span class="st">"walk"</span>,</span></span>
<span class="r-in"><span>  polygon_output <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  departure_datetime <span class="op">=</span> <span class="va">departure_datetime</span>,</span></span>
<span class="r-in"><span>  cutoffs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">120</span>, <span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">iso_poly</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Simple feature collection with 4 features and 2 fields</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geometry type: POLYGON</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dimension:     XY</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bounding box:  xmin: -51.2422 ymin: -30.0778 xmax: -51.1602 ymax: -29.9966</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geodetic CRS:  WGS 84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    id isochrone                       polygons</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 bus_central_station       120 POLYGON ((-51.2412 -30.0724...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 bus_central_station        90 POLYGON ((-51.2421 -30.0365...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 bus_central_station        60 POLYGON ((-51.2421 -30.0365...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 bus_central_station        30 POLYGON ((-51.2314 -30.0287...</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># estimate line-based isochrone from origin</span></span></span>
<span class="r-in"><span><span class="va">iso_lines</span> <span class="op">&lt;-</span> <span class="fu">isochrone</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">r5r_core</span>,</span></span>
<span class="r-in"><span>  origins <span class="op">=</span> <span class="va">origin</span>,</span></span>
<span class="r-in"><span>  mode <span class="op">=</span> <span class="st">"walk"</span>,</span></span>
<span class="r-in"><span>  polygon_output <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  departure_datetime <span class="op">=</span> <span class="va">departure_datetime</span>,</span></span>
<span class="r-in"><span>  cutoffs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">25</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>st_centroid assumes attributes are constant over geometries</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">iso_lines</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Simple feature collection with 6 features and 13 fields</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geometry type: LINESTRING</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dimension:     XY</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bounding box:  xmin: -51.18467 ymin: -30.05426 xmax: -51.17266 ymax: -30.02355</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geodetic CRS:  WGS 84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   edge_index   osm_id isochrone travel_time_p50 from_vertex to_vertex</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        644 27238056       100             100         443       444</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        645 27238056       100             100         444       443</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       1048 27370379       100             100         717       718</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       1049 27370379       100             100         718       717</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       1058 27370382       100             100         722       723</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       1059 27370382       100             100         723       722</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   street_class  length walk   car car_speed bicycle bicycle_lts</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     TERTIARY  78.580 TRUE  TRUE    39.996    TRUE           2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     TERTIARY  78.580 TRUE FALSE    39.996   FALSE           2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        OTHER 242.560 TRUE  TRUE    40.248    TRUE           4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        OTHER 242.560 TRUE  TRUE    40.248    TRUE           4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5        OTHER  85.916 TRUE  TRUE    40.248    TRUE           2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6        OTHER  85.916 TRUE  TRUE    40.248    TRUE           2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         geometry</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 LINESTRING (-51.17282 -30.0...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 LINESTRING (-51.17266 -30.0...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 LINESTRING (-51.18231 -30.0...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 LINESTRING (-51.18467 -30.0...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 LINESTRING (-51.18424 -30.0...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 LINESTRING (-51.1839 -30.05...</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot colors</span></span></span>
<span class="r-in"><span><span class="va">colors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'#ffe0a5'</span>,<span class="st">'#ffcb69'</span>,<span class="st">'#ffa600'</span>,<span class="st">'#ff7c43'</span>,<span class="st">'#f95d6a'</span>,</span></span>
<span class="r-in"><span>            <span class="st">'#d45087'</span>,<span class="st">'#a05195'</span>,<span class="st">'#665191'</span>,<span class="st">'#2f4b7c'</span>,<span class="st">'#003f5c'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># polygons</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">iso_poly</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">isochrone</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">colors</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="isochrone-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># lines</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">iso_lines</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">isochrone</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">colors</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="isochrone-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="stop_r5.html">stop_r5</a></span><span class="op">(</span><span class="va">r5r_core</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> r5r_core has been successfully stopped.</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marcus Saraiva, Rafael H. M. Pereira, Daniel Herszenhut, Carlos Kaue Vieira Braga, Matthew Wigginton Bhagat-Conway, Ipea - Institute for Applied Economic Research, Department of Geography &amp; Planning, University of Toronto.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

