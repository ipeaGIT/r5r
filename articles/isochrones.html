<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Isochrones • r5r</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Isochrones">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">r5r</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.3.0999</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/r5r.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/accessibility.html">Accessibility</a></li>
    <li><a class="dropdown-item" href="../articles/detailed_itineraries.html">Trip planning with detailed_itineraries()</a></li>
    <li><a class="dropdown-item" href="../articles/faq.html">FAQ - Frequently Asked Questions</a></li>
    <li><a class="dropdown-item" href="../articles/fare_structure.html">Accounting for monetary costs</a></li>
    <li><a class="dropdown-item" href="../articles/isochrones.html">Isochrones</a></li>
    <li><a class="dropdown-item" href="../articles/pareto_frontier.html">Trade-offs between travel time and monetary cost</a></li>
    <li><a class="dropdown-item" href="../articles/scenarios.html">Using custom OSM car speeds and LTS</a></li>
    <li><a class="dropdown-item" href="../articles/time_window.html">Using the time_window parameter</a></li>
    <li><a class="dropdown-item" href="../articles/travel_time_matrix.html">Travel time matrices</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ipeaGIT/r5r/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Isochrones</h1>
            
            <h4 data-toc-skip class="date">2025-11-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ipeaGIT/r5r/blob/master/vignettes/isochrones.Rmd" class="external-link"><code>vignettes/isochrones.Rmd</code></a></small>
      <div class="d-none name"><code>isochrones.Rmd</code></div>
    </div>

    
        <div class="abstract">
      <p class="abstract">Abstract</p>
      This vignette shows how to calculate and visualize isochrones in R
      using the <code>r5r</code> package.
    </div>
    
<div class="section level2">
<h2 id="introduction">1. Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>An isochrone map shows how far one can travel from a given place
within a certain amount of time. In other other words, it shows all the
areas reachable from that place within a maximum travel time. This
vignette shows how to calculate and visualize isochrones in R using the
<a href="https://ipeagit.github.io/r5r/index.html"><code>r5r</code>
package</a> using a reproducible example. In this example, we will be
using a sample data set for the city of Porto Alegre (Brazil) included
in <code>r5r</code>. Our aim here is to calculate several isochrones
departing from the central bus station given different travel time
thresholds.</p>
<p>The <code><a href="../reference/isochrone.html">r5r::isochrone()</a></code> function allows you to build both
polygon- and line-based isochrones. We will cover both approaches in
this vignette, where we will be calculating isochrones by public
transport from the central bus station in Porto Alegre.</p>
<p>Before we start, we need to increase Java memory + load a few
libraries, and to<br>
build routable transport network.</p>
<p><strong><em>Warning:</em></strong> If you want to calculate how many
opportunities (e.g. jobs, or schools or hospitals) are located inside
each isochrone, we strongly recommend you NOT to use the
<code><a href="../reference/isochrone.html">isochrone()</a></code> function. You will find much more efficient
ways to do this in the <a href="https://ipeagit.github.io/r5r/articles/accessibility.html">Accessibility
vignette</a>.</p>
</div>
<div class="section level2">
<h2 id="build-routable-transport-network-with-build_network">2. Build routable transport network with
<code>build_network()</code><a class="anchor" aria-label="anchor" href="#build-routable-transport-network-with-build_network"></a>
</h2>
<div class="section level4">
<h4 id="increase-java-memory-and-load-libraries">Increase Java memory and load libraries<a class="anchor" aria-label="anchor" href="#increase-java-memory-and-load-libraries"></a>
</h4>
<p>First, we need to increase the memory available to Java and load the
packages used in this vignette. Please note we allocate RAM memory to
Java <em>before</em> loading our libraries.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>java.parameters <span class="op">=</span> <span class="st">"-Xmx2G"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ipeaGIT/r5r" class="external-link">r5r</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<p>To build a routable transport network with <code>r5r</code>, the user
needs to call <code><a href="../reference/build_network.html">build_network()</a></code> with the path to the
directory where OpenStreetMap and GTFS data are stored.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># system.file returns the directory with example data inside the r5r package</span></span>
<span><span class="co"># set data path to directory containing your own data if not running this example</span></span>
<span><span class="va">data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/poa"</span>, package <span class="op">=</span> <span class="st">"r5r"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">r5r_network</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_network.html">build_network</a></span><span class="op">(</span><span class="va">data_path</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="calculating-and-visualizing-isochrones">3. Calculating and visualizing isochrones<a class="anchor" aria-label="anchor" href="#calculating-and-visualizing-isochrones"></a>
</h2>
<div class="section level3">
<h3 id="polygon-based-isochrones">3.1 Polygon-based isochrones<a class="anchor" aria-label="anchor" href="#polygon-based-isochrones"></a>
</h3>
<p>The most common approach here is to create polygon-based isochrones.
To do this, you need to pass the arguments
<code>polygon_output = TRUE</code> and choose the <code>zoom</code>
level. The polygon-based isochrone in {r5r} are built on top of a
regular grid based on <a href="https://docs.conveyal.com/analysis/methodology#spatial-resolution" class="external-link">Web
Mercator pixels</a>. The zoom level can be controlled with the
<code>zoom</code> parameter; higher zooms lead to more detailed
isochrones at the expense of computational time. The default is 10
(which uses cells of 153m at the Equator). In large networks, high zooms
may not be possible and will give an error.</p>
<p>With the code below, <code>r5r</code> determines the isochrones
considering the median travel time of multiple travel time estimates
calculated departing every minute over a 60-minute time window, between
2pm and 4pm.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># read all points in the city</span></span>
<span><span class="va">points</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_path</span>, <span class="st">"poa_hexgrid.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># subset point with the geolocation of the central bus station</span></span>
<span><span class="va">central_bus_stn</span> <span class="op">&lt;-</span> <span class="va">points</span><span class="op">[</span><span class="fl">291</span>,<span class="op">]</span></span>
<span></span>
<span><span class="co"># isochrone intervals</span></span>
<span><span class="va">time_intervals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># routing inputs</span></span>
<span><span class="va">mode</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"WALK"</span>, <span class="st">"TRANSIT"</span><span class="op">)</span></span>
<span><span class="va">max_walk_time</span> <span class="op">&lt;-</span> <span class="fl">30</span>      <span class="co"># in minutes</span></span>
<span><span class="va">max_trip_duration</span> <span class="op">&lt;-</span> <span class="fl">90</span>  <span class="co"># in minutes</span></span>
<span><span class="va">time_window</span> <span class="op">&lt;-</span> <span class="fl">60</span>        <span class="co"># in minutes</span></span>
<span><span class="va">departure_datetime</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"13-05-2019 14:00:00"</span>,</span>
<span>                                 format <span class="op">=</span> <span class="st">"%d-%m-%Y %H:%M:%S"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># calculate travel time matrix</span></span>
<span><span class="va">iso1</span> <span class="op">&lt;-</span> <span class="fu">r5r</span><span class="fu">::</span><span class="fu"><a href="../reference/isochrone.html">isochrone</a></span><span class="op">(</span></span>
<span>  <span class="va">r5r_network</span>,</span>
<span>  origins <span class="op">=</span> <span class="va">central_bus_stn</span>,</span>
<span>  mode <span class="op">=</span> <span class="va">mode</span>,</span>
<span>  polygon_output <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>  cutoffs <span class="op">=</span> <span class="va">time_intervals</span>,</span>
<span>  departure_datetime <span class="op">=</span> <span class="va">departure_datetime</span>,</span>
<span>  max_walk_time <span class="op">=</span> <span class="va">max_walk_time</span>,</span>
<span>  max_trip_duration <span class="op">=</span> <span class="va">max_trip_duration</span>,</span>
<span>  time_window <span class="op">=</span> <span class="va">time_window</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  zoom <span class="op">=</span> <span class="fl">10</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>As you can see, the <code><a href="../reference/isochrone.html">isochrone()</a></code> functions works very
similarly to the <code><a href="../reference/travel_time_matrix.html">travel_time_matrix()</a></code> function. However,
instead of returning a table with travel time estimates, it returns a
<code>POLYGON  "sf" "data.frame"</code> for each isochrone of each
origin when you set <code>polygon_output = TRUE</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">iso1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 6 features and 3 fields</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -51.2677 ymin: -30.11306 xmax: -51.13312 ymax: -29.98943</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt;                id isochrone percentile                       polygons</span></span>
<span><span class="co">#&gt; 1 89a90128a8fffff       100        p50 MULTIPOLYGON (((-51.1496 -3...</span></span>
<span><span class="co">#&gt; 2 89a90128a8fffff        90        p50 MULTIPOLYGON (((-51.16608 -...</span></span>
<span><span class="co">#&gt; 3 89a90128a8fffff        80        p50 MULTIPOLYGON (((-51.16745 -...</span></span>
<span><span class="co">#&gt; 4 89a90128a8fffff        70        p50 MULTIPOLYGON (((-51.17569 -...</span></span>
<span><span class="co">#&gt; 5 89a90128a8fffff        60        p50 MULTIPOLYGON (((-51.22498 -...</span></span>
<span><span class="co">#&gt; 6 89a90128a8fffff        50        p50 MULTIPOLYGON (((-51.22787 -...</span></span></code></pre></div>
<p>Now it becomes super simple to visualize our isochrones on a map:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># extract OSM network</span></span>
<span><span class="va">street_net</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/street_network_to_sf.html">street_network_to_sf</a></span><span class="op">(</span><span class="va">r5r_network</span><span class="op">)</span></span>
<span><span class="va">main_roads</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">street_net</span><span class="op">$</span><span class="va">edges</span>, <span class="va">street_class</span> <span class="op"><a href="https://rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%like%</a></span> <span class="st">'PRIMARY|SECONDARY'</span><span class="op">)</span></span>
<span>  </span>
<span><span class="va">colors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'#ffe0a5'</span>,<span class="st">'#ffcb69'</span>,<span class="st">'#ffa600'</span>,<span class="st">'#ff7c43'</span>,<span class="st">'#f95d6a'</span>,</span>
<span>            <span class="st">'#d45087'</span>,<span class="st">'#a05195'</span>,<span class="st">'#665191'</span>,<span class="st">'#2f4b7c'</span>,<span class="st">'#003f5c'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">iso1</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">isochrone</span><span class="op">)</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span>, alpha <span class="op">=</span> <span class="fl">.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">main_roads</span>, color <span class="op">=</span> <span class="st">"gray55"</span>, size<span class="op">=</span><span class="fl">0.01</span>, alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">central_bus_stn</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">lon</span>, y<span class="op">=</span><span class="va">lat</span>, color<span class="op">=</span><span class="st">'Central bus\nstation'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html" class="external-link">rev</a></span><span class="op">(</span><span class="va">colors</span><span class="op">)</span> <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Central bus\nstation'</span><span class="op">=</span><span class="st">'black'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"Travel time\n(in minutes)"</span>, color<span class="op">=</span><span class="st">''</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="isochrones_files/figure-html/unnamed-chunk-6-1.png" class="r-plt" width="100%">
## 3.1 Line-based isochrones</p>
<p>Alternatively, you can build line-based isochrones by simply passing
<code>polygon_output = FALSE</code> to the <code><a href="../reference/isochrone.html">isochrone()</a></code>
function. Note that you do not need the <code>zoom</code> parameter
here, and that the output is
<code>LINESTRING  "sf" "data.frame"</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculate travel time matrix</span></span>
<span><span class="va">iso2</span> <span class="op">&lt;-</span> <span class="fu">r5r</span><span class="fu">::</span><span class="fu"><a href="../reference/isochrone.html">isochrone</a></span><span class="op">(</span></span>
<span>  <span class="va">r5r_network</span>,</span>
<span>  origins <span class="op">=</span> <span class="va">central_bus_stn</span>,</span>
<span>  mode <span class="op">=</span> <span class="va">mode</span>,</span>
<span>  polygon_output <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>  cutoffs <span class="op">=</span> <span class="va">time_intervals</span>,</span>
<span>  departure_datetime <span class="op">=</span> <span class="va">departure_datetime</span>,</span>
<span>  max_walk_time <span class="op">=</span> <span class="va">max_walk_time</span>,</span>
<span>  max_trip_duration <span class="op">=</span> <span class="va">max_trip_duration</span>,</span>
<span>  time_window <span class="op">=</span> <span class="va">time_window</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Warning: st_centroid assumes attributes are constant over geometries</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">iso2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 6 features and 13 fields</span></span>
<span><span class="co">#&gt; Geometry type: LINESTRING</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -51.20291 ymin: -30.10872 xmax: -51.1844 ymax: -30.09557</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt;   edge_index    osm_id isochrone travel_time_p50 from_vertex to_vertex</span></span>
<span><span class="co">#&gt; 1      32820 289389686       100              98        7464     14753</span></span>
<span><span class="co">#&gt; 2      32821 289389686       100              98       14753      7464</span></span>
<span><span class="co">#&gt; 3      34254 326021940       100              97       15308     15309</span></span>
<span><span class="co">#&gt; 4      34255 326021940       100              97       15309     15308</span></span>
<span><span class="co">#&gt; 5      35888 337865739       100              97       15671     15690</span></span>
<span><span class="co">#&gt; 6      35889 337865739       100              97       15690     15671</span></span>
<span><span class="co">#&gt;   street_class  length  walk   car car_speed bicycle bicycle_lts</span></span>
<span><span class="co">#&gt; 1        OTHER 374.345  TRUE  TRUE    39.996    TRUE           2</span></span>
<span><span class="co">#&gt; 2        OTHER 374.345  TRUE  TRUE    39.996    TRUE           2</span></span>
<span><span class="co">#&gt; 3        OTHER 227.438  TRUE FALSE    40.248    TRUE           1</span></span>
<span><span class="co">#&gt; 4        OTHER 227.438  TRUE FALSE    40.248    TRUE           1</span></span>
<span><span class="co">#&gt; 5        OTHER  87.668 FALSE FALSE    40.248   FALSE           1</span></span>
<span><span class="co">#&gt; 6        OTHER  87.668 FALSE FALSE    40.248   FALSE           1</span></span>
<span><span class="co">#&gt;                         geometry</span></span>
<span><span class="co">#&gt; 1 LINESTRING (-51.19973 -30.1...</span></span>
<span><span class="co">#&gt; 2 LINESTRING (-51.20291 -30.1...</span></span>
<span><span class="co">#&gt; 3 LINESTRING (-51.1844 -30.10...</span></span>
<span><span class="co">#&gt; 4 LINESTRING (-51.18581 -30.1...</span></span>
<span><span class="co">#&gt; 5 LINESTRING (-51.19704 -30.0...</span></span>
<span><span class="co">#&gt; 6 LINESTRING (-51.19686 -30.0...</span></span></code></pre></div>
<p>Now it becomes super simple to visualize our isochrones on a map:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">iso2</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">isochrone</span><span class="op">)</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html" class="external-link">rev</a></span><span class="op">(</span><span class="va">colors</span><span class="op">)</span> <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">central_bus_stn</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">lon</span>, y<span class="op">=</span><span class="va">lat</span><span class="op">)</span>, color<span class="op">=</span><span class="st">'black'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"Travel time\n(in minutes)"</span>, color<span class="op">=</span><span class="st">'sadasd'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="isochrones_files/figure-html/unnamed-chunk-8-1.png" class="r-plt" width="100%"></p>
<div class="section level4">
<h4 id="cleaning-up-after-usage">Cleaning up after usage<a class="anchor" aria-label="anchor" href="#cleaning-up-after-usage"></a>
</h4>
<p><code>r5r</code> objects are still allocated to any amount of memory
previously set after they are done with their calculations. In order to
remove an existing <code>r5r</code> object and reallocate the memory it
had been using, we use the <code>stop_r5</code> function followed by a
call to Java’s garbage collector, as follows:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">r5r</span><span class="fu">::</span><span class="fu"><a href="../reference/stop_r5.html">stop_r5</a></span><span class="op">(</span><span class="va">r5r_network</span><span class="op">)</span></span>
<span><span class="fu">rJava</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rJava/man/jgc.html" class="external-link">.jgc</a></span><span class="op">(</span>R.gc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>If you have any suggestions or want to report an error, please visit
<a href="https://github.com/ipeaGIT/r5r" class="external-link">the package GitHub
page</a>.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marcus Saraiva, Rafael H. M. Pereira, Daniel Herszenhut, Alex Magnus, Matthew Wigginton Bhagat-Conway, Ipea - Institute for Applied Economic Research, Department of Geography &amp; Planning, University of Toronto.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
