<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FAQ - Frequently Asked Questions • r5r</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="FAQ - Frequently Asked Questions">
<meta property="og:description" content="r5r">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">r5r</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/r5r.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/accessibility.html">Accessibility</a>
    </li>
    <li>
      <a href="../articles/detailed_itineraries.html">Trip planning with detailed_itineraries()</a>
    </li>
    <li>
      <a href="../articles/faq.html">FAQ - Frequently Asked Questions</a>
    </li>
    <li>
      <a href="../articles/fare_structure.html">Accounting for monetary costs</a>
    </li>
    <li>
      <a href="../articles/isochrones.html">Isochrones</a>
    </li>
    <li>
      <a href="../articles/pareto_frontier.html">Trade-offs between travel time and monetary cost</a>
    </li>
    <li>
      <a href="../articles/time_window.html">Using the time_window parameter</a>
    </li>
    <li>
      <a href="../articles/travel_time_matrix.html">Travel time matrices</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ipeaGIT/r5r/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>FAQ - Frequently Asked Questions</h1>
            
            <h4 data-toc-skip class="date">2023-11-23</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ipeaGIT/r5r/tree/master/r-package/../vignettes/faq.Rmd" class="external-link"><code>../vignettes/faq.Rmd</code></a></small>
      <div class="hidden name"><code>faq.Rmd</code></div>

    </div>

    
        <div class="abstract">
      <p class="abstract">Abstract</p>
      A short list of responses and clarifications about Frequently
      Asked Questions from r5r users.
    </div>
    
<div class="section level2">
<h2 id="why-do-some-trips-fromto-the-same-id-have-travel-times-larger-than-zero">1. Why do some trips from/to the same ID have travel times larger
than zero?<a class="anchor" aria-label="anchor" href="#why-do-some-trips-fromto-the-same-id-have-travel-times-larger-than-zero"></a>
</h2>
<details><summary>
click to expand
</summary><blockquote>
<p>This can happen when the input point is distant to any routable road
segment. In this case, R5 will snap the point to the closest road
segment that can be traversed with the selected transport mode, and it
will consider that the person would walk in Euclidean distance from the
input point to the snapped location. So R5 is accounting for this
walking time “as the crow flies” in the routing.</p>
</blockquote>
</details>
</div>
<div class="section level2">
<h2 id="is-it-possible-to-run-r5r-with-custom-modifications-to-street-nework-data">2. Is it possible to run <code>r5r</code> with custom modifications
to street nework data?<a class="anchor" aria-label="anchor" href="#is-it-possible-to-run-r5r-with-custom-modifications-to-street-nework-data"></a>
</h2>
<details><summary>
click to expand
</summary><blockquote>
<p>It is possible to edit the OpenStreetMap <code>.pbf</code> file
before using it in <code>r5r</code> for example to remove or add roads,
change speeds etc etc. To to this, you can edit the <code>.pbf</code>
file with <a href="https://wiki.openstreetmap.org/wiki/JOSM" class="external-link">JOSM
(https://wiki.openstreetmap.org/wiki/JOSM)</a>. Mind you that the the
OpenStreetMap tags can be changed but they cannot be removed from the
data.</p>
</blockquote>
</details>
</div>
<div class="section level2">
<h2 id="why-are-the-output-results-of-time_travel_matrix-and-detailed_itineraries-different">3. Why are the output results of <code>time_travel_matrix()</code>
and <code>detailed_itineraries()</code> different?<a class="anchor" aria-label="anchor" href="#why-are-the-output-results-of-time_travel_matrix-and-detailed_itineraries-different"></a>
</h2>
<details><summary>
click to expand
</summary><blockquote>
<p>The functions <code>time_travel_matrix()</code> (and
<code>expanded_time_travel_matrix</code>) and
<code><a href="../reference/detailed_itineraries.html">detailed_itineraries()</a></code> use different routing algorithms, as
explained in the documentation of these functions. As such, we advise
not to use or combine the output of these functions.</p>
</blockquote>
</details>
</div>
<div class="section level2">
<h2 id="what-does-the-error-geographic-extent-of-street-layer-exceeds-limit-mean-and-what-to-do-about-it">4. What does the ERROR “Geographic extent of street layer exceeds
limit” mean? and what to do about it?<a class="anchor" aria-label="anchor" href="#what-does-the-error-geographic-extent-of-street-layer-exceeds-limit-mean-and-what-to-do-about-it"></a>
</h2>
<details><summary>
click to expand
</summary><blockquote>
<p>If you an error message says something like: <em>“Geographic extent
of street layer (5315196 km2) exceeds limit of 975000 km2”</em>. This
means the your study area is too large. Unfortunately, this is a limit
hardcoded upstream in R5 so we cannot change it in r5r. The advised
<strong>solution</strong> here would be to reduce the extent of the
<code>OpenStreetMap.pbf</code> to a smaller area of interest. One can do
this using the <a href="https://wiki.openstreetmap.org/wiki/Osmosis" class="external-link">Osmosis</a> software.
The code below illustrates how to do this by calling Osmosis from within
R. You need to donwload the Osmosis program to your computer. The latest
releases can be downloaded from <a href="https://github.com/openstreetmap/osmosis/releases" class="external-link">here</a>. Next,
you can use this step-by-step illustrated in the example below:</p>
</blockquote>
<pre><code><span><span class="co"># get the bounding box of your study area</span></span>
<span><span class="va">study_area_polygon</span> <span class="op">&lt;-</span> <span class="fu">geobr</span><span class="fu">::</span><span class="fu">read_state</span><span class="op">(</span>code_state <span class="op">=</span> <span class="st">"ES"</span><span class="op">)</span></span>
<span><span class="va">area_bbox</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span><span class="va">study_area_polygon</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># input: the path to osmosis and the large pbf file in your local computer</span></span>
<span><span class="va">osmosis_path</span> <span class="op">&lt;-</span> <span class="st">"./osmosis_dir/bin/osmosis.bat"</span></span>
<span><span class="va">large_pbf_path</span> <span class="op">&lt;-</span> <span class="st">"./project_dir/large.pbf"</span></span>
<span></span>
<span><span class="co"># path where you want to save the smaller .pbf file</span></span>
<span><span class="va">smaller_pbf</span> <span class="op">&lt;-</span><span class="st">"./project_dir/smaller.pbf"</span></span>
<span></span>
<span><span class="co"># prepare call to osmosis</span></span>
<span><span class="va">osmosis_cmd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%s --read-pbf %s --bounding-box left=%s bottom=%s right=%s top=%s --write-pbf %s"</span>,</span>
<span>                       <span class="va">osmosis_path</span>, <span class="va">large_pbf_path</span>, </span>
<span>                       <span class="va">area_bbox</span><span class="op">@</span><span class="va">xmin</span>, <span class="va">area_bbox</span><span class="op">@</span><span class="va">ymin</span>, <span class="va">area_bbox</span><span class="op">@</span><span class="va">xmax</span>, <span class="va">area_bbox</span><span class="op">@</span><span class="va">ymax</span>,</span>
<span>                       <span class="va">smaller_pbf</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># call to osmosis</span></span>
<span><span class="fu">shell</span><span class="op">(</span><span class="va">osmosis_cmd</span>, translate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</details>
</div>
<div class="section level2">
<h2 id="is-it-possible-to-use-custom-car-speed-data-with-r5r">5. Is it possible to use custom car speed data with r5r?<a class="anchor" aria-label="anchor" href="#is-it-possible-to-use-custom-car-speed-data-with-r5r"></a>
</h2>
<details><summary>
click to expand
</summary><blockquote>
<p>By default, R5 considers the max speed limit of each road as set in
OpenStreetMap data. Unfortunately, there is currently no easy way to
change the car speeds of road segments from within R. Although you could
probably do that by editing the osm.pbf file using other programs. See
issue <a href="https://github.com/ipeaGIT/r5r/issues/289" class="external-link">#289</a>.</p>
</blockquote>
</details>
</div>
<div class="section level2">
<h2 id="why-do-i-get-identical-results-by-public-transport-and-walking">6. Why do I get identical results by public transport and
walking?<a class="anchor" aria-label="anchor" href="#why-do-i-get-identical-results-by-public-transport-and-walking"></a>
</h2>
<details><summary>
click to expand
</summary><blockquote>
<p>If your travel time / accessibility results are identical for public
transport and walking, it is probably because R5 did not detect that the
public transport network is available for your requested trips. This is
likely to occur in case you set a <code>departure_datetime</code>
outside the calendar of public transport operations in your GTFS data.
Check the <code>calendar.txt</code> file in your gtfs.zip feed.
Alternatively, this could occur because there is no public transport
trip option that would be faster than walking for the given
origin-destination pair you queried.</p>
</blockquote>
</details>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Marcus Saraiva, Rafael H. M. Pereira, Daniel Herszenhut, Carlos Kaue Vieira Braga, Matthew Wigginton Bhagat-Conway, Ipea - Institute for Applied Economic Research.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
