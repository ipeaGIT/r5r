<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>FAQ - Frequently Asked Questions • r5r</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="FAQ - Frequently Asked Questions">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">r5r</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.3.0999</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/r5r.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/accessibility.html">Accessibility</a></li>
    <li><a class="dropdown-item" href="../articles/detailed_itineraries.html">Trip planning with detailed_itineraries()</a></li>
    <li><a class="dropdown-item" href="../articles/faq.html">FAQ - Frequently Asked Questions</a></li>
    <li><a class="dropdown-item" href="../articles/fare_structure.html">Accounting for monetary costs</a></li>
    <li><a class="dropdown-item" href="../articles/isochrones.html">Isochrones</a></li>
    <li><a class="dropdown-item" href="../articles/pareto_frontier.html">Trade-offs between travel time and monetary cost</a></li>
    <li><a class="dropdown-item" href="../articles/scenarios.html">Using custom OSM car speeds and LTS</a></li>
    <li><a class="dropdown-item" href="../articles/time_window.html">Using the time_window parameter</a></li>
    <li><a class="dropdown-item" href="../articles/travel_time_matrix.html">Travel time matrices</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ipeaGIT/r5r/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>FAQ - Frequently Asked Questions</h1>
            
            <h4 data-toc-skip class="date">2025-09-01</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ipeaGIT/r5r/blob/master/vignettes/faq.Rmd" class="external-link"><code>vignettes/faq.Rmd</code></a></small>
      <div class="d-none name"><code>faq.Rmd</code></div>
    </div>

    
        <div class="abstract">
      <p class="abstract">Abstract</p>
      A short list of responses and clarifications about Frequently
      Asked Questions from r5r users.
    </div>
    
<div class="section level2">
<h2 id="why-do-some-trips-fromto-the-same-id-have-travel-times-larger-than-zero">1. Why do some trips from/to the same ID have travel times larger
than zero?<a class="anchor" aria-label="anchor" href="#why-do-some-trips-fromto-the-same-id-have-travel-times-larger-than-zero"></a>
</h2>
<details><summary>
click to expand
</summary><blockquote>
<p>This can happen when the input point is distant to any routable road
segment. In this case, R5 will snap the point to the closest road
segment that can be traversed with the selected transport mode, and it
will consider that the person would walk in Euclidean distance from the
input point to the snapped location. So R5 is accounting for this
walking time “as the crow flies” in the routing.</p>
</blockquote>
</details>
</div>
<div class="section level2">
<h2 id="is-it-possible-to-run-r5r-with-custom-modifications-to-street-nework-data">2. Is it possible to run <code>r5r</code> with custom modifications
to street nework data?<a class="anchor" aria-label="anchor" href="#is-it-possible-to-run-r5r-with-custom-modifications-to-street-nework-data"></a>
</h2>
<details><summary>
click to expand
</summary><blockquote>
<p>Yes, all routing and accessibility functions in <code>r5r</code> have
new parameters <code>new_carspeeds</code>, <code>carspeed_scale</code>
and <code>new_lts</code> which allow one to use custom car speeds and
LTS levels for cycling. These parameters provide convient and efficient
ways to build different scenarios of traffic congestion, road closure
and interventions in cycling infrastructure. <a href="https://ipeagit.github.io/r5r/articles/scenarios.html">See this
vignette</a>. For other changes to the OSM network (e.g. including a new
road link), you would need to edit the OpenStreetMap <code>.pbf</code>
file direclty before using it in <code>r5r</code>. To to this, you can
edit the <code>.pbf</code> file with <a href="https://wiki.openstreetmap.org/wiki/JOSM" class="external-link">JOSM
(https://wiki.openstreetmap.org/wiki/JOSM)</a>. Mind you that the the
OpenStreetMap tags can be changed but they cannot be removed from the
data.</p>
</blockquote>
</details>
</div>
<div class="section level2">
<h2 id="why-are-the-output-results-of-time_travel_matrix-and-detailed_itineraries-different">3. Why are the output results of <code>time_travel_matrix()</code>
and <code>detailed_itineraries()</code> different?<a class="anchor" aria-label="anchor" href="#why-are-the-output-results-of-time_travel_matrix-and-detailed_itineraries-different"></a>
</h2>
<details><summary>
click to expand
</summary><blockquote>
<p>The functions <code>time_travel_matrix()</code> (and
<code>expanded_time_travel_matrix</code>) and
<code><a href="../reference/detailed_itineraries.html">detailed_itineraries()</a></code> use different routing algorithms, as
explained in the documentation of these functions. As such, we advise
not to use or combine the output of these functions.</p>
</blockquote>
</details>
</div>
<div class="section level2">
<h2 id="what-does-the-error-geographic-extent-of-street-layer-exceeds-limit-mean-and-what-to-do-about-it">4. What does the ERROR “Geographic extent of street layer exceeds
limit” mean? and what to do about it?<a class="anchor" aria-label="anchor" href="#what-does-the-error-geographic-extent-of-street-layer-exceeds-limit-mean-and-what-to-do-about-it"></a>
</h2>
<details><summary>
click to expand
</summary><blockquote>
<p>If you an error message says something like: <em>“Geographic extent
of street layer (5315196 km2) exceeds limit of 975000 km2”</em>. This
means the your study area is too large. Unfortunately, this is a limit
hardcoded upstream in R5 so we cannot change it in r5r. The advised
<strong>solution</strong> here would be to reduce the extent of the
<code>OpenStreetMap.pbf</code> to a smaller area of interest. One can do
this using the <a href="https://wiki.openstreetmap.org/wiki/Osmosis" class="external-link">Osmosis</a> software.
The code below illustrates how to do this by calling Osmosis from within
R. You need to donwload the Osmosis program to your computer. The latest
releases can be downloaded from <a href="https://github.com/openstreetmap/osmosis/releases" class="external-link">here</a>. Next,
you can use this step-by-step illustrated in the example below:</p>
</blockquote>
<pre><code><span><span class="co"># get the bounding box of your study area</span></span>
<span><span class="va">study_area_polygon</span> <span class="op">&lt;-</span> <span class="fu">geobr</span><span class="fu">::</span><span class="fu">read_state</span><span class="op">(</span>code_state <span class="op">=</span> <span class="st">"ES"</span><span class="op">)</span></span>
<span><span class="va">area_bbox</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span><span class="va">study_area_polygon</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># input: the path to osmosis and the large pbf file in your local computer</span></span>
<span><span class="va">osmosis_path</span> <span class="op">&lt;-</span> <span class="st">"./osmosis_dir/bin/osmosis.bat"</span></span>
<span><span class="va">large_pbf_path</span> <span class="op">&lt;-</span> <span class="st">"./project_dir/large.pbf"</span></span>
<span></span>
<span><span class="co"># path where you want to save the smaller .pbf file</span></span>
<span><span class="va">smaller_pbf</span> <span class="op">&lt;-</span><span class="st">"./project_dir/smaller.pbf"</span></span>
<span></span>
<span><span class="co"># prepare call to osmosis</span></span>
<span><span class="va">osmosis_cmd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%s --read-pbf %s --bounding-box left=%s bottom=%s right=%s top=%s --write-pbf %s"</span>,</span>
<span>                       <span class="va">osmosis_path</span>, <span class="va">large_pbf_path</span>, </span>
<span>                       <span class="va">area_bbox</span><span class="op">@</span><span class="va">xmin</span>, <span class="va">area_bbox</span><span class="op">@</span><span class="va">ymin</span>, <span class="va">area_bbox</span><span class="op">@</span><span class="va">xmax</span>, <span class="va">area_bbox</span><span class="op">@</span><span class="va">ymax</span>,</span>
<span>                       <span class="va">smaller_pbf</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># call to osmosis</span></span>
<span><span class="fu">shell</span><span class="op">(</span><span class="va">osmosis_cmd</span>, translate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</details>
</div>
<div class="section level2">
<h2 id="is-it-possible-to-use-custom-car-speed-data-with-r5r">5. Is it possible to use custom car speed data with r5r?<a class="anchor" aria-label="anchor" href="#is-it-possible-to-use-custom-car-speed-data-with-r5r"></a>
</h2>
<details><summary>
click to expand
</summary><blockquote>
<p>By default, R5 considers the max speed limit of each road as set in
OpenStreetMap data. Unfortunately, there is currently no easy way to
change the car speeds of road segments from within R. Although you could
probably do that by editing the osm.pbf file using other programs. See
issue <a href="https://github.com/ipeaGIT/r5r/issues/289" class="external-link">#289</a>.</p>
</blockquote>
</details>
</div>
<div class="section level2">
<h2 id="why-do-i-get-identical-results-by-public-transport-and-walking">6. Why do I get identical results by public transport and
walking?<a class="anchor" aria-label="anchor" href="#why-do-i-get-identical-results-by-public-transport-and-walking"></a>
</h2>
<details><summary>
click to expand
</summary><blockquote>
<p>If your travel time / accessibility results are identical for public
transport and walking, it is probably because R5 did not detect that the
public transport network is available for your requested trips. This is
likely to occur in case you set a <code>departure_datetime</code>
outside the calendar of public transport operations in your GTFS data.
Check the <code>calendar.txt</code> file in your gtfs.zip feed.
Alternatively, this could occur because there is no public transport
trip option that would be faster than walking for the given
origin-destination pair you queried.</p>
</blockquote>
</details>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marcus Saraiva, Rafael H. M. Pereira, Daniel Herszenhut, Alex Magnus, Matthew Wigginton Bhagat-Conway, Ipea - Institute for Applied Economic Research, Department of Geography &amp; Planning, University of Toronto.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
